import { Injectable } from '@angular/core'
import { HttpClient } from '@angular/common/http'
import { map } from 'rxjs'

@Injectable({
  providedIn: 'root'
})
export class BitcoinService {

  marketPrice = [
    {
      "x": 1650153600,
      "y": 40388.78
    },
    {
      "x": 1650240000,
      "y": 39711.45
    },
    {
      "x": 1650326400,
      "y": 40805.72
    },
    {
      "x": 1650412800,
      "y": 41507.3
    },
    {
      "x": 1650499200,
      "y": 41375.79
    },
    {
      "x": 1650585600,
      "y": 40514.01
    },
    {
      "x": 1650672000,
      "y": 39727.65
    },
    {
      "x": 1650758400,
      "y": 39429.01
    },
    {
      "x": 1650844800,
      "y": 39465.57
    },
    {
      "x": 1650931200,
      "y": 40472.7
    },
    {
      "x": 1651017600,
      "y": 38114.94
    },
    {
      "x": 1651104000,
      "y": 39249.28
    },
    {
      "x": 1651190400,
      "y": 39770.04
    },
    {
      "x": 1651276800,
      "y": 38596.28
    },
    {
      "x": 1651363200,
      "y": 37661.19
    },
    {
      "x": 1651449600,
      "y": 38475.48
    },
    {
      "x": 1651536000,
      "y": 38510.65
    },
    {
      "x": 1651622400,
      "y": 37727.19
    },
    {
      "x": 1651708800,
      "y": 39674.89
    },
    {
      "x": 1651795200,
      "y": 36549.9
    },
    {
      "x": 1651881600,
      "y": 36013.03
    },
    {
      "x": 1651968000,
      "y": 35471.42
    },
    {
      "x": 1652054400,
      "y": 34082.21
    },
    {
      "x": 1652140800,
      "y": 30175.71
    },
    {
      "x": 1652227200,
      "y": 31003.93
    },
    {
      "x": 1652313600,
      "y": 28907.15
    },
    {
      "x": 1652400000,
      "y": 28931.14
    },
    {
      "x": 1652486400,
      "y": 29234.06
    },
    {
      "x": 1652572800,
      "y": 30074.61
    },
    {
      "x": 1652659200,
      "y": 31277.43
    },
    {
      "x": 1652745600,
      "y": 29834.09
    },
    {
      "x": 1652832000,
      "y": 30406.69
    },
    {
      "x": 1652918400,
      "y": 28680.97
    },
    {
      "x": 1653004800,
      "y": 30289.87
    },
    {
      "x": 1653091200,
      "y": 29159.5
    },
    {
      "x": 1653177600,
      "y": 29409.92
    },
    {
      "x": 1653264000,
      "y": 30278.94
    },
    {
      "x": 1653350400,
      "y": 29074.33
    },
    {
      "x": 1653436800,
      "y": 29634.57
    },
    {
      "x": 1653523200,
      "y": 29518.59
    },
    {
      "x": 1653609600,
      "y": 29193.92
    },
    {
      "x": 1653696000,
      "y": 28578.89
    },
    {
      "x": 1653782400,
      "y": 29013.69
    },
    {
      "x": 1653868800,
      "y": 29448.74
    },
    {
      "x": 1653955200,
      "y": 31715.58
    },
    {
      "x": 1654041600,
      "y": 31776.27
    },
    {
      "x": 1654128000,
      "y": 29780.81
    },
    {
      "x": 1654214400,
      "y": 30429.88
    },
    {
      "x": 1654300800,
      "y": 29681.76
    },
    {
      "x": 1654387200,
      "y": 29845.23
    },
    {
      "x": 1654473600,
      "y": 29901.35
    },
    {
      "x": 1654560000,
      "y": 31349.82
    },
    {
      "x": 1654646400,
      "y": 31117.83
    },
    {
      "x": 1654732800,
      "y": 30189.25
    },
    {
      "x": 1654819200,
      "y": 30083.46
    },
    {
      "x": 1654905600,
      "y": 29059.41
    },
    {
      "x": 1654992000,
      "y": 28344.5
    },
    {
      "x": 1655078400,
      "y": 26593.3
    },
    {
      "x": 1655164800,
      "y": 22431.22
    },
    {
      "x": 1655251200,
      "y": 22189.29
    },
    {
      "x": 1655337600,
      "y": 22550.79
    },
    {
      "x": 1655424000,
      "y": 20350.48
    },
    {
      "x": 1655510400,
      "y": 20434.75
    },
    {
      "x": 1655596800,
      "y": 18977.51
    },
    {
      "x": 1655683200,
      "y": 20540.38
    },
    {
      "x": 1655769600,
      "y": 20582.29
    },
    {
      "x": 1655856000,
      "y": 20703.51
    },
    {
      "x": 1655942400,
      "y": 19953.71
    },
    {
      "x": 1656028800,
      "y": 21088.3
    },
    {
      "x": 1656115200,
      "y": 21194.68
    },
    {
      "x": 1656201600,
      "y": 21481.38
    },
    {
      "x": 1656288000,
      "y": 21020.04
    },
    {
      "x": 1656374400,
      "y": 20702.23
    },
    {
      "x": 1656460800,
      "y": 20256.61
    },
    {
      "x": 1656547200,
      "y": 20085.93
    },
    {
      "x": 1656633600,
      "y": 19865.7
    },
    {
      "x": 1656720000,
      "y": 19226.7
    },
    {
      "x": 1656806400,
      "y": 19224.75
    },
    {
      "x": 1656892800,
      "y": 19288.97
    },
    {
      "x": 1656979200,
      "y": 20208.45
    },
    {
      "x": 1657065600,
      "y": 20181.91
    },
    {
      "x": 1657152000,
      "y": 20545.61
    },
    {
      "x": 1657238400,
      "y": 21633.44
    },
    {
      "x": 1657324800,
      "y": 21636.45
    },
    {
      "x": 1657411200,
      "y": 21582.6
    },
    {
      "x": 1657497600,
      "y": 20834.61
    },
    {
      "x": 1657584000,
      "y": 19946.31
    },
    {
      "x": 1657670400,
      "y": 19292.99
    },
    {
      "x": 1657756800,
      "y": 20223.69
    },
    {
      "x": 1657843200,
      "y": 20568.9
    },
    {
      "x": 1657929600,
      "y": 20835.61
    },
    {
      "x": 1658016000,
      "y": 21197.1
    },
    {
      "x": 1658102400,
      "y": 20774.23
    },
    {
      "x": 1658188800,
      "y": 22538.08
    },
    {
      "x": 1658275200,
      "y": 23403.29
    },
    {
      "x": 1658361600,
      "y": 23227.22
    },
    {
      "x": 1658448000,
      "y": 23154.09
    },
    {
      "x": 1658534400,
      "y": 22687.08
    },
    {
      "x": 1658620800,
      "y": 22461.7
    },
    {
      "x": 1658707200,
      "y": 22582.4
    },
    {
      "x": 1658793600,
      "y": 21300.72
    },
    {
      "x": 1658880000,
      "y": 21267.33
    },
    {
      "x": 1658966400,
      "y": 22950.29
    },
    {
      "x": 1659052800,
      "y": 23856.25
    },
    {
      "x": 1659139200,
      "y": 23792.0
    },
    {
      "x": 1659225600,
      "y": 23647.99
    },
    {
      "x": 1659312000,
      "y": 23326.49
    },
    {
      "x": 1659398400,
      "y": 23298.94
    },
    {
      "x": 1659484800,
      "y": 22981.77
    },
    {
      "x": 1659571200,
      "y": 22831.85
    },
    {
      "x": 1659657600,
      "y": 22608.3
    },
    {
      "x": 1659744000,
      "y": 23295.14
    },
    {
      "x": 1659830400,
      "y": 22947.19
    },
    {
      "x": 1659916800,
      "y": 23174.25
    },
    {
      "x": 1660003200,
      "y": 23816.32
    },
    {
      "x": 1660089600,
      "y": 23156.31
    },
    {
      "x": 1660176000,
      "y": 23959.92
    },
    {
      "x": 1660262400,
      "y": 23953.77
    },
    {
      "x": 1660348800,
      "y": 24418.38
    },
    {
      "x": 1660435200,
      "y": 24447.13
    },
    {
      "x": 1660521600,
      "y": 24314.89
    },
    {
      "x": 1660608000,
      "y": 24096.19
    },
    {
      "x": 1660694400,
      "y": 23876.29
    },
    {
      "x": 1660780800,
      "y": 23332.09
    },
    {
      "x": 1660867200,
      "y": 23193.99
    },
    {
      "x": 1660953600,
      "y": 20843.22
    },
    {
      "x": 1661040000,
      "y": 21150.33
    },
    {
      "x": 1661126400,
      "y": 21520.51
    },
    {
      "x": 1661212800,
      "y": 21402.93
    },
    {
      "x": 1661299200,
      "y": 21516.02
    },
    {
      "x": 1661385600,
      "y": 21377.51
    },
    {
      "x": 1661472000,
      "y": 21597.93
    },
    {
      "x": 1661558400,
      "y": 20233.32
    },
    {
      "x": 1661644800,
      "y": 20035.59
    },
    {
      "x": 1661731200,
      "y": 19550.07
    },
    {
      "x": 1661817600,
      "y": 20290.41
    },
    {
      "x": 1661904000,
      "y": 19793.02
    },
    {
      "x": 1661990400,
      "y": 20047.68
    },
    {
      "x": 1662076800,
      "y": 20130.52
    },
    {
      "x": 1662163200,
      "y": 19952.91
    },
    {
      "x": 1662249600,
      "y": 19834.94
    },
    {
      "x": 1662336000,
      "y": 19994.65
    },
    {
      "x": 1662422400,
      "y": 19789.87
    },
    {
      "x": 1662508800,
      "y": 18806.7
    },
    {
      "x": 1662595200,
      "y": 19280.08
    },
    {
      "x": 1662681600,
      "y": 19327.53
    },
    {
      "x": 1662768000,
      "y": 21387.58
    },
    {
      "x": 1662854400,
      "y": 21673.03
    },
    {
      "x": 1662940800,
      "y": 21794.52
    },
    {
      "x": 1663027200,
      "y": 22392.71
    },
    {
      "x": 1663113600,
      "y": 20172.56
    }
  ]

  constructor(private http: HttpClient) { }

  getRate() {
    return this.http.get<number>('https://blockchain.info/tobtc?currency=USD&value=1')
      .pipe(map(res => res))
  }

  getMarketPrice() {
    // return this.marketPrice
    return this.http.get('https://api.blockchain.info/charts/market-price?timespan=5months&format=json&cors=true')
      .pipe(map(res => res))
  }
 
  getConfirmedTransactions() {
    return this.http.get('https://api.blockchain.info/charts/trade-volume?timespan=5months&format=json&cors=true')
      .pipe(map(res => res))
  }
}
